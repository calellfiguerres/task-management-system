<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <%- include("../partials/bootstrap"); %> <!--You might need to change the path to bootstrap-->
    <link rel="stylesheet" href="/static/CreateTaskStyle.css">

    <title>Your Tasks</title>
</head>
<body>
    <%- include("../partials/navbar"); %> <!-- you might need to change this too -->
    
    <div class="container mt-5">
        <h1>Task List</h1>
        <div class="mb-3">
            <form action="" method="get">
                <label for="sortSelect" class="form-label">Sort By:</label>
                <select class="form-select" name="sort" id="sortSelect">
                    <option value="dueDate">Due Date</option>
                    <option value="priority">Priority</option>
                </select>
                <button type="submit" class="btn btn-primary">Sort</button>
            </form>
        </div>
        <% if (tasks.length > 0) { %>
            <div class="list-group">
                <% tasks.forEach(function(task) { %>
                    <div class="list-group-item priority-<%= task.priority %>">
                        <h5 class="mb-1"><%= task.name %></h5>
                        <p class="mb-1"><%= task.description %></p>
                        <small><%= task.dueDate %></small>
                        <button class="btn btn-primary float-right" onclick="markAsDone('<%= task._id %>')">Mark as Done</button>
                    </div>
                <% }) %>
            </div>
        <% } else { %>
            <p>No tasks available.</p>
        <% } %>
    </div>
    <%- include("../partials/footer"); %> <!-- and this too -->

    <!-- <script>
        function markAsDone(taskId) {
            // You can add JavaScript code here to handle marking the task as done
            // For example, you can make an AJAX request to update the task status in the backend
            console.log('Marking task as done:', taskId);
        }
    
        function sortTasks(sortBy) {
            // Get the list of tasks
            // const taskList = document.getElementById('tasks');
            // Convert the HTMLCollection to an array
            // const tasksArray = Array.from(taskList.children);
            const tasksArray = <%= tasks %>;
            // Sort the tasks array based on the selected sorting criteria
            tasksArray.sort((a, b) => {
                if (sortBy === 'priority') {
                    return parseInt(b.classList[1].split('-')[1]) - parseInt(a.classList[1].split('-')[1]);
                } else if (sortBy === 'date') {
                    return new Date(a.querySelector('small').textContent) - new Date(b.querySelector('small').textContent);
                }
            });
            // Reorder the tasks in the task list
            taskList.innerHTML = '';
            tasksArray.forEach(task => {
                taskList.appendChild(task);
            });
        }
    </script> -->
</body>
</html>